"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[235],{5235:(H,l,s)=>{s.r(l),s.d(l,{ForgotPasswordModule:()=>$});var u=s(4521),a=s(3075),_=s(7579),p=s(2722),t=s(5e3),T=s(1937),f=s(4004),g=s(262),h=s(9646),C=s(2340),P=s(520);const w=C.N.base_url;let A=(()=>{class o{constructor(r){this._http=r}validateUser(r){return this._http.post(`${w}/user/validate`,r).pipe((0,f.U)(e=>!((null==e?void 0:e.statusCode)&&200!=(null==e?void 0:e.statusCode))),(0,g.K)(e=>(0,h.of)(!1)))}restorePassword(r){return this._http.post(`${w}/user/restore-password`,r).pipe((0,f.U)(e=>!((null==e?void 0:e.statusCode)&&200!=(null==e?void 0:e.statusCode))),(0,g.K)(e=>(0,h.of)(!1)))}}return o.\u0275fac=function(r){return new(r||o)(t.LFG(P.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var U=s(9808),d=s(7322),v=s(7531),x=s(7423),F=s(773);function b(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Correo electr\xf3nico requerido "),t.qZA())}function y(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Por favor ingrese un correo electr\xf3nico v\xe1lido "),t.qZA())}function I(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Documento de identificaci\xf3n requerido "),t.qZA())}function J(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Documento de identificaci\xf3n no v\xe1lido "),t.qZA())}function O(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1," Continuar "),t.qZA())}function E(o,n){1&o&&t._UZ(0,"mat-progress-spinner",27),2&o&&t.Q6J("diameter",24)("mode","indeterminate")}const Z=function(){return["/sign-in"]};function N(o,n){if(1&o){const r=t.EpF();t.TgZ(0,"form",18),t.NdJ("ngSubmit",function(){return t.CHM(r),t.oxw().onValidateEmail()}),t.TgZ(1,"mat-form-field",19)(2,"mat-label"),t._uU(3,"Correo electr\xf3nico"),t.qZA(),t._UZ(4,"input",20),t.YNc(5,b,2,0,"mat-error",21),t.YNc(6,y,2,0,"mat-error",21),t.qZA(),t.TgZ(7,"mat-form-field",19)(8,"mat-label"),t._uU(9,"Documento de identificaci\xf3n \xfanico"),t.qZA(),t._UZ(10,"input",22),t.YNc(11,I,2,0,"mat-error",21),t.YNc(12,J,2,0,"mat-error",21),t.qZA(),t.TgZ(13,"button",23),t.YNc(14,O,2,0,"span",21),t.YNc(15,E,1,2,"mat-progress-spinner",24),t.qZA(),t.TgZ(16,"div",25)(17,"a",26),t._uU(18,"Ya tengo cuenta "),t.qZA()()()}if(2&o){const r=t.oxw();t.xp6(1),t.Q6J("formGroup",r.stepOneForm),t.xp6(4),t.Q6J("ngIf",r.stepOneForm.get("email").hasError("required")),t.xp6(1),t.Q6J("ngIf",r.stepOneForm.get("email").hasError("email")),t.xp6(1),t.Q6J("formGroup",r.stepOneForm),t.xp6(4),t.Q6J("ngIf",r.stepOneForm.get("dpi").hasError("required")),t.xp6(1),t.Q6J("ngIf",r.stepOneForm.get("dpi").hasError("minLength")||r.stepOneForm.get("dpi").hasError("maxLength")),t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!r.isLoading),t.xp6(1),t.Q6J("ngIf",r.isLoading),t.xp6(2),t.Q6J("routerLink",t.DdM(10,Z))}}function q(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Contrase\xf1a requerida "),t.qZA())}function Q(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Contrase\xf1a no v\xe1lida "),t.qZA())}function Y(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Contrase\xf1a requerida "),t.qZA())}function L(o,n){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Las contrase\xf1as no son las mismas "),t.qZA())}function M(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1," Reiniciar contrase\xf1a "),t.qZA())}function S(o,n){1&o&&t._UZ(0,"mat-progress-spinner",27),2&o&&t.Q6J("diameter",24)("mode","indeterminate")}function R(o,n){if(1&o){const r=t.EpF();t.TgZ(0,"form",28),t.NdJ("ngSubmit",function(){return t.CHM(r),t.oxw().onResetPassword()}),t.TgZ(1,"mat-form-field",29)(2,"mat-label"),t._uU(3,"Contrase\xf1a"),t.qZA(),t._UZ(4,"input",30),t.YNc(5,q,2,0,"mat-error",21),t.YNc(6,Q,2,0,"mat-error",21),t.qZA(),t.TgZ(7,"mat-form-field",29)(8,"mat-label"),t._uU(9,"Confirmar contrase\xf1a"),t.qZA(),t._UZ(10,"input",31),t.YNc(11,Y,2,0,"mat-error",21),t.YNc(12,L,2,0,"mat-error",21),t.qZA(),t.TgZ(13,"button",23),t.YNc(14,M,2,0,"span",21),t.YNc(15,S,1,2,"mat-progress-spinner",24),t.qZA(),t.TgZ(16,"div",25)(17,"a",26),t._uU(18,"Ya tengo cuenta "),t.qZA()()()}if(2&o){const r=t.oxw();t.Q6J("formGroup",r.stepTwoForm),t.xp6(5),t.Q6J("ngIf",r.stepTwoForm.get("password").hasError("required")),t.xp6(1),t.Q6J("ngIf",r.stepTwoForm.get("password").hasError("pattern")),t.xp6(5),t.Q6J("ngIf",r.stepTwoForm.get("matchPassword").hasError("required")),t.xp6(1),t.Q6J("ngIf",r.stepTwoForm.get("matchPassword").hasError("mustMatch")),t.xp6(1),t.Q6J("color","primary"),t.xp6(1),t.Q6J("ngIf",!r.isLoading),t.xp6(1),t.Q6J("ngIf",r.isLoading),t.xp6(2),t.Q6J("routerLink",t.DdM(9,Z))}}const j=[{path:"",component:(()=>{class o{constructor(r,e,i,c){this._router=r,this._formbuilder=e,this._snackbar=i,this._service=c,this.showRecoverForm=!1,this._unsubscribeAll=new _.x,this._passwordRegex=new RegExp("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$")}ngOnInit(){this._initStepOneForm()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}_initStepOneForm(){this.stepOneForm=this._formbuilder.group({email:["",[a.kI.required,a.kI.email]],dpi:["",[a.kI.required,a.kI.minLength(13),a.kI.maxLength(13)]]})}_initPasswordForm(){this.stepTwoForm=this._formbuilder.group({password:["",[a.kI.required,a.kI.pattern(this._passwordRegex)]],matchPassword:["",[a.kI.required]]},{validators:[this._matchPassword("password","matchPassword")]})}_matchPassword(r,e){return i=>{const m=i.controls[e];m.errors&&!m.errors.MustMatch||m.setErrors(i.controls[r].value!=m.value?{mustMatch:!0}:null)}}onValidateEmail(){try{if(this.isLoading=!0,this.stepOneForm.invalid)return Object.values(this.stepOneForm.controls).forEach(r=>r.markAsTouched());this._service.validateUser(this.stepOneForm.value).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{if(r)return this._initPasswordForm(),this.showRecoverForm=!0;this._snackbar.open("No se ha encontrado el usuario.")})}catch(r){}finally{this.isLoading=!1}}onResetPassword(){try{if(this.isLoading=!0,this.stepTwoForm.invalid)return Object.values(this.stepTwoForm.controls).forEach(r=>r.markAsTouched());this._service.restorePassword(Object.assign(Object.assign({},this.stepOneForm.value),this.stepTwoForm.value)).pipe((0,p.R)(this._unsubscribeAll)).subscribe(r=>{this._snackbar.open(r?"Contrase\xf1a restablecida correctamente.":"Ha ocurrido un error al reiniciar la contrase\xf1a."),r&&this._router.navigate(["auth/sign-in"])})}catch(r){}finally{this.isLoading=!1}}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(u.F0),t.Y36(a.qu),t.Y36(T.cw),t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-forgot-password"]],decls:25,vars:2,consts:[[1,"flex","flex-col","sm:flex-row","items-center","md:items-start","sm:justify-center","md:justify-start","flex-auto","min-w-0"],[1,"md:flex","md:items-center","md:justify-end","w-full","sm:w-auto","md:h-full","md:w-1/2","py-8","px-4","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],["class","mt-8",3,"ngSubmit",4,"ngIf"],["class","mt-8",3,"formGroup","ngSubmit",4,"ngIf"],[1,"relative","hidden","md:flex","flex-auto","items-center","justify-center","w-1/2","h-full","p-16","lg:px-28","overflow-hidden","bg-gray-800","dark:border-l",2,"background-image","url('/assets/images/cuilco.jpg')"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-gray-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"z-10","relative","w-full","max-w-2xl"],[1,"text-7xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","tracking-tight","leading-6","text-gray-100"],[1,"mt-8",3,"ngSubmit"],[1,"w-full",3,"formGroup"],["id","email","matInput","","autocomplete","off","formControlName","email"],[4,"ngIf"],["id","dpi","matInput","","autocomplete","off","formControlName","dpi"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-3",3,"color"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","text-md","font-medium","text-secondary"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],[3,"diameter","mode"],[1,"mt-8",3,"formGroup","ngSubmit"],[1,"w-full"],["matInput","","id","password","type","password","formControlName","password"],["matInput","","type","password","id","matchPassword","formControlName","matchPassword"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4," Reiniciar contrase\xf1a "),t.qZA(),t.YNc(5,N,19,11,"form",4),t.YNc(6,R,19,10,"form",5),t.qZA()(),t.TgZ(7,"div",6),t.O4$(),t.TgZ(8,"svg",7)(9,"g",8),t._UZ(10,"circle",9)(11,"circle",10),t.qZA()(),t.TgZ(12,"svg",11)(13,"defs")(14,"pattern",12),t._UZ(15,"rect",13),t.qZA()(),t._UZ(16,"rect",14),t.qZA(),t.kcU(),t.TgZ(17,"div",15)(18,"div",16)(19,"div"),t._uU(20,"Bienvenido al"),t.qZA(),t.TgZ(21,"div"),t._uU(22,"portal de COCODE CUILCO"),t.qZA()(),t.TgZ(23,"div",17),t._uU(24," Gestiona e inf\xf3rmate acerca de tu comunidad atrav\xe9s de este plataforma que tenemos para t\xed. "),t.qZA()()()()),2&r&&(t.xp6(5),t.Q6J("ngIf",!e.showRecoverForm),t.xp6(1),t.Q6J("ngIf",e.showRecoverForm))},directives:[U.O5,a._Y,a.JL,a.F,d.KE,a.sg,d.hX,v.Nt,a.Fj,a.JJ,a.u,d.TO,x.lW,F.Ou,u.yS],styles:[""]}),o})()}];let k=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(j)],u.Bz]}),o})();var D=s(5245),B=s(6236),G=s(7775),z=s(4466);let $=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[k,x.ot,d.lN,D.Ps,v.c,F.Cq,B.J,G.fC,z.m]]}),o})()}}]);