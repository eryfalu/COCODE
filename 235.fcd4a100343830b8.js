"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[235],{5235:(K,p,s)=>{s.r(p),s.d(p,{ForgotPasswordModule:()=>H});var u=s(4521),a=s(3075),_=s(7579),f=s(2722),o=s(5e3),T=s(1937),g=s(4004),h=s(262),w=s(9646),C=s(2340),P=s(520);const v=C.N.base_url;let A=(()=>{class t{constructor(r){this._http=r}validateUser(r){return this._http.post(`${v}/user/validate`,r).pipe((0,g.U)(e=>!((null==e?void 0:e.statusCode)&&200!=(null==e?void 0:e.statusCode))),(0,h.K)(e=>(0,w.of)(!1)))}restorePassword(r){return this._http.post(`${v}/user/restore-password`,r).pipe((0,g.U)(e=>!((null==e?void 0:e.statusCode)&&200!=(null==e?void 0:e.statusCode))),(0,h.K)(e=>(0,w.of)(!1)))}}return t.\u0275fac=function(r){return new(r||t)(o.LFG(P.eN))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var U=s(9808),d=s(7322),x=s(7531),c=s(7423),F=s(773),Z=s(5245);function b(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Correo electr\xf3nico requerido "),o.qZA())}function y(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Por favor ingrese un correo electr\xf3nico v\xe1lido "),o.qZA())}function I(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Documento de identificaci\xf3n requerido "),o.qZA())}function J(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Documento de identificaci\xf3n no v\xe1lido "),o.qZA())}function O(t,n){1&t&&(o.TgZ(0,"span"),o._uU(1," Continuar "),o.qZA())}function E(t,n){1&t&&o._UZ(0,"mat-progress-spinner",30),2&t&&o.Q6J("diameter",24)("mode","indeterminate")}const N=function(){return["/auth/sign-in"]};function q(t,n){if(1&t){const r=o.EpF();o.TgZ(0,"form",18),o.NdJ("ngSubmit",function(){return o.CHM(r),o.oxw().onValidateEmail()}),o.TgZ(1,"mat-form-field",19)(2,"mat-label"),o._uU(3,"Correo electr\xf3nico"),o.qZA(),o._UZ(4,"input",20),o.YNc(5,b,2,0,"mat-error",21),o.YNc(6,y,2,0,"mat-error",21),o.qZA(),o.TgZ(7,"mat-form-field",19)(8,"mat-label"),o._uU(9,"Documento de identificaci\xf3n \xfanico"),o.qZA(),o._UZ(10,"input",22),o.YNc(11,I,2,0,"mat-error",21),o.YNc(12,J,2,0,"mat-error",21),o.qZA(),o.TgZ(13,"button",23),o.YNc(14,O,2,0,"span",21),o.YNc(15,E,1,2,"mat-progress-spinner",24),o.qZA(),o.TgZ(16,"div",25)(17,"div",26)(18,"a",27),o._UZ(19,"mat-icon",28),o.TgZ(20,"span",29),o._uU(21,"Ya tengo cuenta"),o.qZA()()()()()}if(2&t){const r=o.oxw();o.xp6(1),o.Q6J("formGroup",r.stepOneForm),o.xp6(4),o.Q6J("ngIf",r.stepOneForm.get("email").hasError("required")),o.xp6(1),o.Q6J("ngIf",r.stepOneForm.get("email").hasError("email")),o.xp6(1),o.Q6J("formGroup",r.stepOneForm),o.xp6(4),o.Q6J("ngIf",r.stepOneForm.get("dpi").hasError("required")),o.xp6(1),o.Q6J("ngIf",r.stepOneForm.get("dpi").hasError("minLength")||r.stepOneForm.get("dpi").hasError("maxLength")),o.xp6(1),o.Q6J("color","primary"),o.xp6(1),o.Q6J("ngIf",!r.isLoading),o.xp6(1),o.Q6J("ngIf",r.isLoading),o.xp6(3),o.Q6J("color","primary")("routerLink",o.DdM(12,N)),o.xp6(1),o.Q6J("svgIcon","heroicons_outline:arrow-narrow-left")}}function Q(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Contrase\xf1a requerida "),o.qZA())}function Y(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Contrase\xf1a no v\xe1lida "),o.qZA())}function L(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Contrase\xf1a requerida "),o.qZA())}function M(t,n){1&t&&(o.TgZ(0,"mat-error"),o._uU(1," Las contrase\xf1as no son las mismas "),o.qZA())}function S(t,n){1&t&&(o.TgZ(0,"span"),o._uU(1," Reiniciar contrase\xf1a "),o.qZA())}function R(t,n){1&t&&o._UZ(0,"mat-progress-spinner",30),2&t&&o.Q6J("diameter",24)("mode","indeterminate")}const j=function(){return["/sign-in"]};function k(t,n){if(1&t){const r=o.EpF();o.TgZ(0,"form",31),o.NdJ("ngSubmit",function(){return o.CHM(r),o.oxw().onResetPassword()}),o.TgZ(1,"mat-form-field",32)(2,"mat-label"),o._uU(3,"Contrase\xf1a"),o.qZA(),o._UZ(4,"input",33),o.YNc(5,Q,2,0,"mat-error",21),o.YNc(6,Y,2,0,"mat-error",21),o.qZA(),o.TgZ(7,"mat-form-field",32)(8,"mat-label"),o._uU(9,"Confirmar contrase\xf1a"),o.qZA(),o._UZ(10,"input",34),o.YNc(11,L,2,0,"mat-error",21),o.YNc(12,M,2,0,"mat-error",21),o.qZA(),o.TgZ(13,"button",23),o.YNc(14,S,2,0,"span",21),o.YNc(15,R,1,2,"mat-progress-spinner",24),o.qZA(),o.TgZ(16,"div",25)(17,"a",35),o._uU(18,"Ya tengo cuenta "),o.qZA()()()}if(2&t){const r=o.oxw();o.Q6J("formGroup",r.stepTwoForm),o.xp6(5),o.Q6J("ngIf",r.stepTwoForm.get("password").hasError("required")),o.xp6(1),o.Q6J("ngIf",r.stepTwoForm.get("password").hasError("pattern")),o.xp6(5),o.Q6J("ngIf",r.stepTwoForm.get("matchPassword").hasError("required")),o.xp6(1),o.Q6J("ngIf",r.stepTwoForm.get("matchPassword").hasError("mustMatch")),o.xp6(1),o.Q6J("color","primary"),o.xp6(1),o.Q6J("ngIf",!r.isLoading),o.xp6(1),o.Q6J("ngIf",r.isLoading),o.xp6(2),o.Q6J("routerLink",o.DdM(9,j))}}const D=[{path:"",component:(()=>{class t{constructor(r,e,i,l){this._router=r,this._formbuilder=e,this._snackbar=i,this._service=l,this.showRecoverForm=!1,this._unsubscribeAll=new _.x,this._passwordRegex=new RegExp("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$")}ngOnInit(){this._initStepOneForm()}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}_initStepOneForm(){this.stepOneForm=this._formbuilder.group({email:["",[a.kI.required,a.kI.email]],dpi:["",[a.kI.required,a.kI.minLength(13),a.kI.maxLength(13)]]})}_initPasswordForm(){this.stepTwoForm=this._formbuilder.group({password:["",[a.kI.required,a.kI.pattern(this._passwordRegex)]],matchPassword:["",[a.kI.required]]},{validators:[this._matchPassword("password","matchPassword")]})}_matchPassword(r,e){return i=>{const m=i.controls[e];m.errors&&!m.errors.MustMatch||m.setErrors(i.controls[r].value!=m.value?{mustMatch:!0}:null)}}onValidateEmail(){try{if(this.isLoading=!0,this.stepOneForm.invalid)return Object.values(this.stepOneForm.controls).forEach(r=>r.markAsTouched());this._service.validateUser(this.stepOneForm.value).pipe((0,f.R)(this._unsubscribeAll)).subscribe(r=>{if(r)return this._initPasswordForm(),this.showRecoverForm=!0;this._snackbar.open("No se ha encontrado el usuario.")})}catch(r){}finally{this.isLoading=!1}}onResetPassword(){try{if(this.isLoading=!0,this.stepTwoForm.invalid)return Object.values(this.stepTwoForm.controls).forEach(r=>r.markAsTouched());this._service.restorePassword(Object.assign(Object.assign({},this.stepOneForm.value),this.stepTwoForm.value)).pipe((0,f.R)(this._unsubscribeAll)).subscribe(r=>{this._snackbar.open(r?"Contrase\xf1a restablecida correctamente.":"Ha ocurrido un error al reiniciar la contrase\xf1a."),r&&this._router.navigate(["auth/sign-in"])})}catch(r){}finally{this.isLoading=!1}}}return t.\u0275fac=function(r){return new(r||t)(o.Y36(u.F0),o.Y36(a.qu),o.Y36(T.cw),o.Y36(A))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-forgot-password"]],decls:25,vars:2,consts:[[1,"flex","flex-col","sm:flex-row","items-center","md:items-start","sm:justify-center","md:justify-start","flex-auto","min-w-0"],[1,"md:flex","md:items-center","md:justify-end","w-full","sm:w-auto","md:h-full","md:w-1/2","py-8","px-4","sm:p-12","md:p-16","sm:rounded-2xl","md:rounded-none","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],["class","mt-8",3,"ngSubmit",4,"ngIf"],["class","mt-8",3,"formGroup","ngSubmit",4,"ngIf"],[1,"relative","hidden","md:flex","flex-auto","items-center","justify-center","w-1/2","h-full","p-16","lg:px-28","overflow-hidden","bg-gray-800","dark:border-l",2,"background-image","url('/assets/background.jpg')"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["viewBox","0 0 220 192","width","220","height","192","fill","none",1,"absolute","-top-16","-right-16","text-gray-700"],["id","837c3e70-6c3a-44e6-8854-cc48c737b659","x","0","y","0","width","20","height","20","patternUnits","userSpaceOnUse"],["x","0","y","0","width","4","height","4","fill","currentColor"],["width","220","height","192","fill","url(#837c3e70-6c3a-44e6-8854-cc48c737b659)"],[1,"z-10","relative","w-full","max-w-2xl"],[1,"text-7xl","font-bold","leading-none","text-gray-100"],[1,"mt-6","text-lg","tracking-tight","leading-6","text-gray-100"],[1,"mt-8",3,"ngSubmit"],[1,"w-full",3,"formGroup"],["id","email","matInput","","autocomplete","off","formControlName","email"],[4,"ngIf"],["id","dpi","matInput","","autocomplete","off","formControlName","dpi"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-3",3,"color"],[3,"diameter","mode",4,"ngIf"],[1,"mt-8","text-md","font-medium","text-secondary"],[1,"-ml-4","sm:mt-8"],["mat-button","",3,"color","routerLink"],[3,"svgIcon"],[1,"ml-2"],[3,"diameter","mode"],[1,"mt-8",3,"formGroup","ngSubmit"],[1,"w-full"],["matInput","","id","password","type","password","formControlName","password"],["matInput","","type","password","id","matchPassword","formControlName","matchPassword"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"]],template:function(r,e){1&r&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),o._uU(4," Reiniciar contrase\xf1a "),o.qZA(),o.YNc(5,q,22,13,"form",4),o.YNc(6,k,19,10,"form",5),o.qZA()(),o.TgZ(7,"div",6),o.O4$(),o.TgZ(8,"svg",7)(9,"g",8),o._UZ(10,"circle",9)(11,"circle",10),o.qZA()(),o.TgZ(12,"svg",11)(13,"defs")(14,"pattern",12),o._UZ(15,"rect",13),o.qZA()(),o._UZ(16,"rect",14),o.qZA(),o.kcU(),o.TgZ(17,"div",15)(18,"div",16)(19,"div"),o._uU(20,"Bienvenido al"),o.qZA(),o.TgZ(21,"div"),o._uU(22,"portal de COCODE CUILCO"),o.qZA()(),o.TgZ(23,"div",17),o._uU(24," Gestiona e inf\xf3rmate acerca de tu comunidad atrav\xe9s de este plataforma que tenemos para t\xed. "),o.qZA()()()()),2&r&&(o.xp6(5),o.Q6J("ngIf",!e.showRecoverForm),o.xp6(1),o.Q6J("ngIf",e.showRecoverForm))},directives:[U.O5,a._Y,a.JL,a.F,d.KE,a.sg,d.hX,x.Nt,a.Fj,a.JJ,a.u,d.TO,c.lW,F.Ou,c.zs,u.yS,Z.Hw],styles:[""]}),t})()}];let B=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[u.Bz.forChild(D)],u.Bz]}),t})();var G=s(6236),z=s(7775),$=s(4466);let H=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[B,c.ot,d.lN,Z.Ps,x.c,F.Cq,G.J,z.fC,$.m]]}),t})()}}]);